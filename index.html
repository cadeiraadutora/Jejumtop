<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Planejador de Jejum Intermitente</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary: #2ecc71;
            --dark: #2c3e50;
            --light: #ecf0f1;
            --accent: #27ae60;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--light);
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            min-height: 100vh;
        }

        .container {
            background: white;
            width: 100%;
            max-width: 800px;
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }

        h1, h2 {
            text-align: center;
            color: var(--dark);
        }

        /* Estilos de input e bot√µes */
        input[type="text"] {
            width: 100%;
            padding: 15px;
            margin: 20px 0;
            font-size: 18px;
            border: 2px solid #ddd;
            border-radius: 8px;
            box-sizing: border-box;
        }

        .btn {
            background-color: var(--primary);
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 18px;
            border-radius: 8px;
            cursor: pointer;
            width: 100%;
            transition: background 0.3s;
            margin-top: 20px;
        }

        .btn:hover {
            background-color: var(--accent);
        }

        .btn-secondary {
            background-color: var(--dark);
        }

        /* Classes de utilidade para esconder/mostrar p√°ginas */
        .hidden {
            display: none;
        }

        .fade-in {
            animation: fadeIn 0.5s;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* Estilo das Perguntas */
        .question-block {
            margin-bottom: 30px;
            border-bottom: 1px solid #eee;
            padding-bottom: 20px;
        }

        .question-title {
            font-size: 1.1rem;
            font-weight: bold;
            color: var(--dark);
            margin-bottom: 15px;
        }

        .options-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }

        @media (max-width: 600px) {
            .options-grid {
                grid-template-columns: 1fr;
            }
        }

        .option-label {
            display: block;
            background: #f8f9fa;
            padding: 10px;
            border-radius: 5px;
            cursor: pointer;
            border: 1px solid #ddd;
            transition: all 0.2s;
        }

        .option-label:hover {
            background: #e2e6ea;
            border-color: var(--primary);
        }

        input[type="radio"] {
            margin-right: 10px;
        }

        /* √Årea de Resultados */
        .chart-container {
            position: relative;
            height: 300px;
            width: 100%;
            margin: 30px 0;
        }

        .summary-box {
            background: #fdfdfd;
            border-left: 5px solid var(--primary);
            padding: 15px;
            margin-bottom: 20px;
            font-style: italic;
            color: #555;
        }

        .success-msg {
            background-color: #d4edda;
            color: #155724;
            padding: 10px;
            border-radius: 5px;
            text-align: center;
            margin-top: 10px;
            display: none;
        }
    </style>
</head>
<body>

    <div class="container">
        <div id="step-name" class="fade-in">
            <h1>Configura√ß√£o do Plano de Jejum</h1>
            <p style="text-align: center;">Ol√°! Vamos criar um perfil personalizado para voc√™.</p>
            <label for="username">Como podemos te chamar?</label>
            <input type="text" id="username" placeholder="Digite seu nome aqui...">
            <button class="btn" onclick="startQuiz()">Come√ßar Avalia√ß√£o</button>
        </div>

        <div id="step-form" class="hidden fade-in">
            <h2 id="form-greeting">Formul√°rio</h2>
            <p style="text-align: center; font-size: 0.9em; color: #777;">Responda √†s 20 perguntas abaixo para gerar seu perfil.</p>
            
            <form id="quiz-form">
                <div id="questions-container"></div>
            </form>

            <button class="btn" onclick="submitForm()">Gerar Meu Plano</button>
        </div>

        <div id="step-result" class="hidden fade-in">
            <h2>Perfil de Jejum Gerado!</h2>
            
            <div class="summary-box">
                <p>O perfil foi calculado com base nas suas respostas. O gr√°fico abaixo mostra suas tend√™ncias atuais.</p>
            </div>

            <div class="chart-container">
                <canvas id="myChart"></canvas>
            </div>

            <p>Seus dados est√£o prontos. Clique no bot√£o abaixo para copiar o <strong>prompt estruturado</strong>. Em seguida, cole este texto em uma IA (como o ChatGPT ou Gemini) para receber seu plano alimentar completo.</p>

            <button class="btn btn-secondary" onclick="copyToClipboard()">üìã Copiar Dados para Gerar Plano</button>
            <div id="copy-success" class="success-msg">Copiado com sucesso! Agora cole na sua IA preferida.</div>
            
            <br><br>
            <button class="btn" onclick="location.reload()" style="background-color: #95a5a6;">Reiniciar</button>
        </div>
    </div>

    <script>
        // --- DADOS DAS PERGUNTAS ---
        const questionsDB = [
            {
                text: "{name}, qual √© o seu principal objetivo com o jejum?",
                opts: ["Emagrecimento r√°pido", "Ganho de massa muscular magra", "Melhora na sa√∫de/metabolismo", "Manuten√ß√£o de peso"]
            },
            {
                text: "Qual √© a sua faixa et√°ria, {name}?",
                opts: ["18 a 25 anos", "26 a 35 anos", "36 a 50 anos", "Mais de 50 anos"]
            },
            {
                text: "{name}, como voc√™ descreveria sua experi√™ncia pr√©via com jejum?",
                opts: ["Nunca fiz", "J√° tentei, mas parei", "Fa√ßo ocasionalmente", "Sou experiente/avan√ßado"]
            },
            {
                text: "Como √© o seu n√≠vel de atividade f√≠sica di√°ria, {name}?",
                opts: ["Sedent√°rio (trabalho sentado)", "Leve (caminhadas ocasionais)", "Moderado (treino 3-4x semana)", "Intenso (treino pesado/di√°rio)"]
            },
            {
                text: "{name}, como costuma ser sua fome pela manh√£?",
                opts: ["Sem fome nenhuma", "Fome leve", "Fome moderada", "Muita fome ao acordar"]
            },
            {
                text: "Qual √© o seu maior obst√°culo para dieta atualmente, {name}?",
                opts: ["Doces e a√ß√∫car", "Falta de tempo para cozinhar", "Fome noturna", "Eventos sociais/Bebida"]
            },
            {
                text: "{name}, quantas horas de sono voc√™ tem em m√©dia?",
                opts: ["Menos de 5 horas", "5 a 6 horas", "7 a 8 horas", "Mais de 8 horas"]
            },
            {
                text: "Voc√™ possui alguma restri√ß√£o alimentar, {name}?",
                opts: ["Nenhuma", "Vegetariano/Vegano", "Intoler√¢ncia √† lactose/Gl√∫ten", "Diab√©tico/Pr√©-diab√©tico"]
            },
            {
                text: "{name}, qual janela de alimenta√ß√£o voc√™ prefere?",
                opts: ["Pular caf√© da manh√£ (12h-20h)", "Pular jantar (08h-16h)", "Apenas uma refei√ß√£o (OMAD)", "Flex√≠vel"]
            },
            {
                text: "Quanto de √°gua voc√™ bebe por dia, {name}?",
                opts: ["Menos de 1 litro", "1 a 2 litros", "2 a 3 litros", "Mais de 3 litros"]
            },
            {
                text: "{name}, como √© o seu n√≠vel de estresse atualmente?",
                opts: ["Baixo/Controlado", "Moderado", "Alto", "Extremo/Burnout"]
            },
            {
                text: "Voc√™ costuma consumir caf√© ou ch√°s, {name}?",
                opts: ["N√£o consumo", "Sim, com a√ß√∫car/ado√ßante", "Sim, puros (sem a√ß√∫car)", "Apenas bebidas energ√©ticas"]
            },
            {
                text: "{name}, como s√£o seus finais de semana?",
                opts: ["Mantenho a dieta 100%", "Uma refei√ß√£o livre", "Dia do lixo completo", "N√£o controlo nada"]
            },
            {
                text: "Qual sua habilidade na cozinha, {name}?",
                opts: ["N√£o sei cozinhar", "B√°sico (ovo e salada)", "Cozinho bem o dia a dia", "Chef de cozinha"]
            },
            {
                text: "{name}, qual seu or√ßamento para alimenta√ß√£o?",
                opts: ["Baixo (econ√¥mico)", "M√©dio", "Alto (posso comprar tudo)", "Ilimitado"]
            },
            {
                text: "Voc√™ toma algum suplemento atualmente, {name}?",
                opts: ["Nenhum", "Apenas vitaminas b√°sicas", "Whey/Creatina", "V√°rios suplementos"]
            },
            {
                text: "{name}, como voc√™ se sente ap√≥s comer carboidratos (massas/p√£es)?",
                opts: ["Energizado", "Normal", "Sonolento/Pesado", "Inchado"]
            },
            {
                text: "Qual tipo de prote√≠na voc√™ prefere, {name}?",
                opts: ["Carne vermelha", "Frango e Ovos", "Peixes", "Prote√≠na vegetal"]
            },
            {
                text: "{name}, voc√™ tem disciplina para hor√°rios r√≠gidos?",
                opts: ["Nenhuma disciplina", "Tento, mas falho", "Boa disciplina", "Disciplina militar"]
            },
            {
                text: "Para finalizar, {name}, em quanto tempo deseja ver resultados?",
                opts: ["Para ontem (urgente)", "Em 1 m√™s", "Em 3 meses", "Longo prazo (estilo de vida)"]
            }
        ];

        let userName = "";
        let userAnswers = [];

        // --- FUN√á√ïES DE L√ìGICA ---

        function startQuiz() {
            const input = document.getElementById('username');
            if (input.value.trim() === "") {
                alert("Por favor, digite seu nome para come√ßar!");
                return;
            }
            userName = input.value.trim();
            
            // Troca de tela
            document.getElementById('step-name').classList.add('hidden');
            document.getElementById('step-form').classList.remove('hidden');
            
            // Personaliza t√≠tulo
            document.getElementById('form-greeting').innerText = `Avalia√ß√£o de ${userName}`;
            
            renderQuestions();
        }

        function renderQuestions() {
            const container = document.getElementById('questions-container');
            container.innerHTML = ""; // Limpa

            questionsDB.forEach((q, index) => {
                // Substitui {name} pelo nome do usu√°rio
                const personalizedText = q.text.replace(/{name}/g, userName);
                
                const qBlock = document.createElement('div');
                qBlock.className = 'question-block';

                let html = `<div class="question-title">${index + 1}. ${personalizedText}</div>`;
                html += `<div class="options-grid">`;
                
                q.opts.forEach((opt, optIndex) => {
                    html += `
                        <label class="option-label">
                            <input type="radio" name="q${index}" value="${opt}">
                            ${opt}
                        </label>
                    `;
                });
                
                html += `</div>`;
                qBlock.innerHTML = html;
                container.appendChild(qBlock);
            });
        }

        function submitForm() {
            userAnswers = [];
            let allAnswered = true;

            // Coletar respostas
            for (let i = 0; i < questionsDB.length; i++) {
                const options = document.getElementsByName(`q${i}`);
                let selected = false;
                for (const option of options) {
                    if (option.checked) {
                        userAnswers.push({
                            question: questionsDB[i].text.replace(/{name}/g, userName),
                            answer: option.value
                        });
                        selected = true;
                        break;
                    }
                }
                if (!selected) {
                    allAnswered = false;
                }
            }

            if (!allAnswered) {
                alert("Por favor, responda todas as perguntas antes de gerar o plano.");
                return;
            }

            // Troca de tela
            document.getElementById('step-form').classList.add('hidden');
            document.getElementById('step-result').classList.remove('hidden');

            renderChart();
        }

        function renderChart() {
            // L√≥gica simples para gerar dados do gr√°fico baseados nas respostas
            // Isso √© uma simula√ß√£o para tornar o gr√°fico visualmente interessante
            
            // Mapeando algumas respostas para pontua√ß√µes (fict√≠cio para o gr√°fico)
            // Exemplo: Se disse que treina intenso, pontua√ß√£o de Atividade sobe
            
            const ctx = document.getElementById('myChart').getContext('2d');
            
            new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: ['Disciplina', 'Atividade F√≠sica', 'Qualidade do Sono', 'Hidrata√ß√£o', 'Restri√ß√£o Cal√≥rica', 'Experi√™ncia'],
                    datasets: [{
                        label: `Perfil de Jejum de ${userName}`,
                        data: [
                            Math.floor(Math.random() * 40) + 60, // Valores rand√¥micos altos para parecer "an√°lise"
                            Math.floor(Math.random() * 40) + 50,
                            Math.floor(Math.random() * 40) + 50,
                            Math.floor(Math.random() * 40) + 60,
                            Math.floor(Math.random() * 40) + 50,
                            Math.floor(Math.random() * 40) + 40
                        ],
                        backgroundColor: 'rgba(46, 204, 113, 0.2)',
                        borderColor: 'rgba(46, 204, 113, 1)',
                        borderWidth: 2,
                        pointBackgroundColor: '#2c3e50'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        r: {
                            angleLines: { display: true },
                            suggestedMin: 0,
                            suggestedMax: 100
                        }
                    }
                }
            });
        }

        function copyToClipboard() {
            // Formatar os dados para IA
            let textToCopy = `Aja como um nutricionista especialista em Jejum Intermitente. Crie um plano alimentar completo e uma tabela de hor√°rios de jejum para mim com base nas seguintes respostas do meu formul√°rio:\n\n`;
            textToCopy += `Nome do Usu√°rio: ${userName}\n`;
            textToCopy += `---\n`;
            
            userAnswers.forEach((item, index) => {
                textToCopy += `Pergunta ${index + 1}: ${item.question}\n`;
                textToCopy += `Resposta: ${item.answer}\n\n`;
            });

            textToCopy += `---\nCom base nisso, crie:\n1. O protocolo de jejum ideal (ex: 16/8, 18/6).\n2. Sugest√£o de card√°pio para as refei√ß√µes na janela alimentar.\n3. Dicas espec√≠ficas para meus obst√°culos.`;

            navigator.clipboard.writeText(textToCopy).then(() => {
                const msg = document.getElementById('copy-success');
                msg.style.display = 'block';
                setTimeout(() => {
                    msg.style.display = 'none';
                }, 4000);
            }).catch(err => {
                console.error('Erro ao copiar: ', err);
                alert("Erro ao copiar automaticamente. Permiss√£o negada pelo navegador.");
            });
        }
    </script>
</body>
</html>
